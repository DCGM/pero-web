{% extends 'template.html' %}

{% block header %}
  Handwritten dataset
{% endblock %}

{% block content %}
    <p>
        By rewriting the following text you will contribute to the development of automatic transcription of Czech historical documents.
        Our goal is to make it possible to search online for example in the contents of chronicles, registry and
        land books and historical correspondence. Please, rewrite the printed text anywhere on the obtained
        page with preserved linefeeding and errors. By completing this sheet you agree to its publication and free use for any purpose.
        Underneath the form you can see example of one completed page.
    </p>
    <p>
        Please scan the completed sheets of paper using the desk scanner and upload it by the form below or send it to: ihradis@fit.vutbr.cz with subject "Brno HWR dataset".
        Alternatively, send the completed letter to: Michal Hradiš, Faculty of Information Technology, BUT, Božetěchova 1/2, 612 66 Brno.
    </p>

    <form id="handwritten_dataset_form" action="/handwritten_dataset" method="POST" enctype="multipart/form-data">
        <div class="input-default-wrapper mt-5">
            <div class="input-group">
                onclick=”ga(‘send’, ‘event’, ‘PDF’, ‘Download’, ‘Company Brochure – PDF Download’);
                <div class="input-group-text mb-3" id="hwr_get_button" onclick="ga('send', 'event', 'HWR', 'Download', 'HWR page download');getRandomHandwrittenPage()">Get document</div>
            </div>

            <div class="input-group">
                <div class="custom-file">
                    <input type="file" class="custom-file-input" name="hwr_uploaded_files" id="hwr_upload_file_input" aria-describedby="hwr_upload_file_input" multiple>
                    <label class="custom-file-label" id="hwr_upload_label" for="hwr_upload_file_input">Choose file</label>
                </div>

                <span class="input-group-text" id="hwr_upload_button" onclick="ga('send', 'event', 'HWR', 'Upload', 'HWR page upload');uploadHandwrittenPages()">Upload</span>
            </div>
        </div>
    </form>

    <div id="error_block" {% if success is not defined or success == true %} class="hidden" {% endif %}>
        <p id="hwr_upload_form_no_file_message">Please, select a file.</p>
        {% if success is defined and success == false %}
            {% if message is defined and message|length > 0 %}
                <p>{{ message }}</p>
            {% else %}
                <p>Something unexpectedly failed. Please, report this to ikiss@fit.vutbr.cz.</p>
            {% endif %}
        {% endif %}
    </div>

    <div id="success_block" {% if success is not defined or success == false %} class="hidden" {% endif %}>
        {% if success is defined and success == true %}
            {% if message is defined and message|length > 0 %}
                <p>{{ message }}</p>
            {% else %}
                <p>File(s) successfully saved. Thank you for participating.</p>
            {% endif %}
        {% endif %}
    </div>

    <p>
        <a href="/static/img/hwr_example.jpg" target="_blank">
            <img class="img-fluid" src="/static/img/hwr_example.jpg" alt="Example of transcribed page."/>
        </a>
    </p>

{% endblock %}
