{% extends 'template.html' %}

{% block header %}
  Brno Mobile OCR Dataset
{% endblock %}

{% block content %}
<h2>Download</h2>
    <p>Within the Brno Mobile OCR Dataset, you can download:</p>
    <ul>
        <li>Templates</li>
        <li>Untransformed PAGE XML and photos</li>
        <li>Transformed PAGE XML and photos</li>
        <li>Cropped lines with transcriptions</li>
    </ul>

<h2>Evaluate</h2>
<p>You can evaluate your OCR system using form below.</p>
<form id="bmod_upload_form" method="POST" action="/brno_mobile_ocr_dataset" enctype="multipart/form-data">
    <div class="input-group">
        <div class="custom-file">
            <input type="file" class="custom-file-input" name="bmod_uploaded_transcription_file" id="bmod_upload_file_input" aria-describedby="bmod_upload_file_input">
            <label class="custom-file-label" id="bmod_upload_label" for="bmod_upload_file_input">Choose file</label>
        </div>

        <span class="input-group-text" id="bmod_upload_button" onclick="uploadBMODTranscriptionFile()">Upload</span>
    </div>
</form>

<div id="error_block" {% if success is not defined or success == true %} class="hidden" {% endif %}>
    <p id="bmod_upload_form_no_file_message">Please, select a file.</p>

    {% if success is defined and success == false %}
        {% if message is defined and message|length > 0 %}
            <p>Error message: {{ message }}</p>
        {% else %}
            <p>Something unexpectedly failed. Please, report this to ikiss@fit.vutbr.cz.</p>
        {% endif %}
    {% endif %}
</div>

<div id="success_block" {% if success is not defined or success == false %} class="hidden" {% endif %}>
    {% if success is defined and success == true %}
        <p>Thank you for the participation. Your achieved results:</p>

        <table class="results">
            <thead>
                <tr><th colspan="2">Easy subset</th></tr>
            </thead>
            <tbody>
                <tr><td>CER:</td><td>{{ cer_easy }}</td></tr>
                <tr><td>WER:</td><td>{{ wer_easy }}</td></tr>
            </tbody>
        </table>

        <table class="results">
            <thead>
                <tr><th colspan="2">Easy subset</th></tr>
            </thead>
            <tbody>
                <tr><td>CER:</td><td>{{ cer_medium }}</td></tr>
                <tr><td>WER:</td><td>{{ wer_medium }}</td></tr>
            </tbody>
        </table>

        <table class="results">
            <thead>
                <tr><th colspan="2">Easy subset</th></tr>
            </thead>
            <tbody>
                <tr><td>CER:</td><td>{{ cer_hard }}</td></tr>
                <tr><td>WER:</td><td>{{ wer_hard }}</td></tr>
            </tbody>
        </table>

        {% if message is defined and message|length > 0 %}
            <p>Additional info: {{ message }}</p>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
